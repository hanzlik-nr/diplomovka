<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="diplomová práca">
  <meta name="author" content="Bc. Richard Hanzlík">

  <title>Bc. Richard Hanzlík - Diplomová práca - Jelenec</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/grayscale.min.css" rel="stylesheet">

  <!-- LEAFLET - MAPS/GIS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
  <!-- jQuery - kvoli volaniu svc (sluzieb) -->
  <script src="https://unpkg.com/jquery@3.4.0/dist/jquery.js"></script>
</head>

<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-black" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="/#page-top"><i class="fas fa-home"></i></a>
      <!-- <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
        data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
        aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button> -->
      <!-- <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#about">O stránke</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#projects">Mapa</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#contact">Kontakt</a>
          </li>
        </ul>
      </div> -->
    </div>
  </nav>

  <!-- Header -->
  <!-- tu netreba -->
  <!-- <header class="masthead">
    <div class="container d-flex h-100 align-items-center">
      <div class="mx-auto text-center">
        <h1 class="mx-auto my-0 text-uppercase">Využitie nástrojov WEB&nbsp;GIS</h1>
        <h3 class="text-white-50 mx-auto mt-2 mb-5">pre publikovanie údajov o vodných nádržiach</h3>
        <a href="#about" class="btn btn-primary js-scroll-trigger">Viac info</i></a>
        &nbsp;
        <a href="/lite" class="btn btn-primary js-scroll-trigger" target="_blank">Viac mapy</a>
      </div>
    </div>
  </header> -->

  <!-- Projects / Map Section -->
  <section id="projects" class="projects-section bg-light">
    <div class="container">

      <div class="row align-items-center no-gutters mb-4 mb-lg-5">
          <p class="text-black-50 mb-0">
              Stav 
              <i class="fas fa-calendar-day"><span id="stav_den">21.04.2019</span></i>&nbsp;
              <i class="far fa-clock"><span id="stav_cas"> 13:34 </span></i>&nbsp;
              <i class="fas fa-map-pin"><span id="miesto"> 48.39478, 18.20992 </span></i>&nbsp;
              <i class="fas fa-arrows-alt-v"><span id="hlbka">6.7 m</span></i>
            </p>
      </div>
      <div class="row align-items-center no-gutters mb-4 mb-lg-5">
        <div class="col-lg-12 order-lg-first">
          <!-- <div class="bg-black text-center h-100 project> -->
          <div id="mojamapa" style="height:640px; width: 100%;" />
          <!-- </div> -->
        </div>
        <script type="text/javascript">
          var layer_hlbka = '', datum_mer = '', cas_mer = '';

          // https://leafletjs.com/reference-1.4.0.html

          // nacitavanie mapy
          //zmysluplny zoom: 15 - 18 (potom viac nepusti)
          var nadrz_jelenec = [48.39478, 18.20992];

          var mymap = L.map('mojamapa')
            .setView(nadrz_jelenec, 16);  //suradnice stredu, zoom

          //zaklad - mapa z openstreetmap
          L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &vert; <a href="http://www.webmap.sk">WebMap</a>',
            //https://gis.stackexchange.com/questions/198088/leaflet-subdomains-if-subdomain-is-down-attempt-another
            subdomains: ['a', 'b', 'c']
          }).addTo(mymap);

          //mierka
          L.control.scale().addTo(mymap);

          console.log("php call");
          jQuery.get("/svc/mapovanie.php", function (response) {
            console.log(response);
            var parsed_res = response.split(";");
            console.log(parsed_res.length);
            if (parsed_res.length == 3) {
              datum_mer = parsed_res[0];
              cas_mer = parsed_res[1];
              layer_hlbka = parsed_res[2];
              console.log("res ok");
              console.log(datum_mer);
              document.getElementById("stav_den").innerHTML = ' ' + datum_mer;
              console.log(cas_mer);
              document.getElementById("stav_cas").innerHTML = ' ' + cas_mer;
              //hladina/hlbky
              var nadrzWms = L.tileLayer.wms('http://webmap.sk:8080/geoserver2112/nitra_students/wms?', {
                //layers: 'nitra_students:435_nanovo',
                layers: layer_hlbka,
                tiled: true,
                format: 'image/png',
                transparent: true,
                maxZoom: 18,
                minZoom: 15,
                continuousWorld: true
              }).addTo(mymap);
              console.log(layer_hlbka);
            } else {
              cnsole.log("res nok");
            }
          });

        </script>
      </div>

    </div>
  </section>

  <!-- Contact Section -->
  <!-- Footer -->
  <footer class="bg-black small text-center text-white-50">
    <div class="container">
      Copyright &copy; Bc. Richard Hanzlík 2019
    </div>
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/grayscale.min.js"></script>

</body>

</html>